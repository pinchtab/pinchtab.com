---
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '@/lib/utils';

const buttonVariants = cva(
  'inline-flex items-center justify-center gap-2 font-semibold rounded-sm transition-all duration-150 cursor-pointer whitespace-nowrap',
  {
    variants: {
      variant: {
        primary: 'bg-brand-accent text-brand-bg hover:bg-brand-accent-light active:scale-95 font-bold',
        secondary: 'bg-white/5 border border-brand-border-subtle text-brand-text hover:bg-white/8 hover:border-brand-border active:scale-95',
        tertiary: 'text-brand-text hover:text-brand-accent transition-colors',
        ghost: 'hover:bg-brand-surface-hover transition-colors',
      },
      size: {
        sm: 'px-3 py-1.5 text-sm',
        md: 'px-6 py-3 text-base',
        lg: 'px-7 py-4 text-lg',
      },
      disabled: {
        true: 'opacity-50 cursor-not-allowed',
      },
    },
    defaultVariants: {
      variant: 'primary',
      size: 'md',
    },
  }
);

export interface Props extends VariantProps<typeof buttonVariants> {
  href?: string;
  target?: string;
  rel?: string;
  type?: 'button' | 'submit' | 'reset';
  disabled?: boolean;
  class?: string;
}

const { variant, size, disabled, href, target, rel, type = 'button', class: className, ...rest } = Astro.props;

const buttonClass = cn(buttonVariants({ variant, size, disabled }), className);

const Component = href ? 'a' : 'button';
---

<Component
  class={buttonClass}
  href={href}
  target={target}
  rel={rel}
  type={href ? undefined : type}
  disabled={disabled && !href}
  {...rest}
>
  <slot />
</Component>
